<!DOCTYPE html>
<html>
    <head>
        <title>津波情報図 for MiyakoCam</title>
        <meta charset="UTF-8" lang="ja">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="description" content="津波情報図 for MiyakoCam">
        <!--SNSでのサイト表示-->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:site" content="@MiyakoCam">
        <meta property="twitter:description" content="大津波警報、津波警報、津波注意報、津波予報を地図上で見られます。">
        <meta property="og:title" content="津波情報図 for MiyakoCam">
        <meta property="og:site_name" content="津波情報図 for MiyakoCam">
        <meta property="og:image" content="https://nanka.cloudfree.jp/webapps/tsunami/source/og.png">
        <!--その他のCSS・ライブラリ読み込み-->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZL8HPL24E7"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ZL8HPL24E7');
        </script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
        <script src="../../static/js/leaflet-src.js"></script>
        <link rel="stylesheet" href="../../static/font/fonts.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@40,400,0,0" />
        <style>
            html {
                width: 100%;
                height: 100%;
                overflow: hidden;
                margin: 0;
                font-size: 14px;
            }
            body {
                width: 100%;
                height: 100%;
                margin: 0;
                font-size: 14px;
            }
            select, input, button {
                outline: none;
            }
            input[type="number"]::-webkit-outer-spin-button, 
            input[type="number"]::-webkit-inner-spin-button { 
                -webkit-appearance: none; 
                margin: 0; 
            } 
            input[type="number"] { 
                -moz-appearance:textfield; 
                appearance:textfield; 
            } 
            #map {
                width: 100%;
                height: 100%;
            }
            #map.background_nerv {
                background: #1d1d1d;
            }
            #title {
                position: absolute;
                top: 30px;
                left: -10px;
                z-index: 10000;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 600;
                user-select: none;
                display: none;
            }
            #title.display {
                display: block;
            }
            #title_text {
                padding: 10px;
                padding-left: 20px;
                font-size: 1.6rem;
                border: #1f57be 4px solid;
                background: #ffffff;
                color: #1f57be;
                vertical-align: bottom;
            }
            #title_time {
                padding: 10px;
                padding-left: 25px;
                font-size: 1.4rem;
                background: #00000088;
                color: white;
            }
            #title_time .small {
                font-size: 80%;
                letter-spacing: 2px;
            }
            .btns {
                position: absolute;
                bottom: 10px;
                left: 10px;
                z-index: 10000;
                user-select: none;
            }
            .setsumei, #quakelist, #reload, #map_ichi, #test, #btn_shindo_ichiran, #autoreload, #menu-open-btn {
                display: inline-block;
                background: #00000088;
                border: white 2.5px solid;
                border-radius: 5px;
                color: white;
                padding: 5px;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 0.9rem;
                cursor: pointer;
            }
            #reload_num, #autoreload_num {
                background: #00000000;
                border: 0;
                width: 2rem;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 0.9rem;
                color: white;
                border-bottom: #ffffff 1px solid;
            }
            .autoreload_setsumei.on {
                background: #ffffff;
                color: black;
            }
            .autoreload_setsumei.on button, .autoreload_setsumei.on input {
                color: black!important;
            }
            .autoreload_setsumei.on input {
                border-bottom: #000000 1px solid!important;
            }

            .leaflet-popup {
                margin-bottom: 0;
            }
            .leaflet-popup-content-wrapper, .leaflet-popup-tip {
                background-color: rgba(255, 255, 255, 0.85);
                box-shadow: 0px 3px 7px 2px rgba(0, 0, 0, 0.4);
                border-radius: 0!important;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                user-select: none;
            }
            .leaflet-popup-content {
                color: black !important;
                font-size: 1.4rem;
                margin: 10px 8px 8px 8px;
            }
            .leaflet-popup-tip {
                display: none;
            }
            .leaflet-fade-anim .leaflet-popup {
                transition: 0s;
            }
            select, input, button {
                outline: none;
            }
            input[type="number"]::-webkit-outer-spin-button, 
            input[type="number"]::-webkit-inner-spin-button { 
                -webkit-appearance: none; 
                margin: 0; 
            } 
            input[type="number"] { 
                -moz-appearance:textfield; 
            } 
            #map {
                width: 100%;
                height: 100%;
            }
            #map.background_nerv {
                background: #1d1d1d;
            }
            #map.background_wni {
                background: linear-gradient(180deg, rgba(113,163,198,1) 0%, rgba(43,70,119,1) 100%);
            }
            #map.background_quarog {
                background: #78A0C8;
            }
            .leaflet-popup {
                margin-bottom: 0;
            }
            .leaflet-popup-content-wrapper, .leaflet-popup-tip {
                background-color: rgba(255, 255, 255, 0.85);
                box-shadow: 0px 3px 7px 2px rgba(0, 0, 0, 0.4);
                border-radius: 0!important;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                user-select: none;
            }
            .leaflet-popup-content {
                color: black !important;
                font-size: 1.4rem;
                margin: 10px 8px 8px 8px;
            }
            .leaflet-popup-tip {
                display: none;
            }
            .leaflet-fade-anim .leaflet-popup {
                transition: 0s;
            }
            #title {
                position: absolute;
                top: 30px;
                left: -10px;
                z-index: 10000;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 600;
                user-select: none;
            }
            #title_text {
                padding: 10px;
                padding-left: 20px;
                font-size: 1.6rem;
                border: #1f57be 4px solid;
                background: #ffffff;
                color: #1f57be;
                vertical-align: bottom;
            }
            #title_time {
                padding: 10px;
                padding-left: 25px;
                font-size: 1.4rem;
                background: #00000088;
                color: white;
            }
            #title_time .small {
                font-size: 80%;
                letter-spacing: 2px;
            }
            #info {
                position: absolute;
                top: calc(30px + 40px + 1.6rem + 1.4rem + 30px);
                left: 15px;
                z-index: 10000;
                padding: 10px;
                font-size: 1.4rem;
                background: #00000088;
                color: white;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                line-height: 1.8rem;
                min-width: 13em;
            }
            #info .maxint {
                font-size: 2rem;
                text-align: center;
                line-height: 2.2rem;
            }
            #info .maxint img, .shindo_ichiran_kakutitle img {
                height: 1em;
                transform: translateY(8%);
                margin-left: 5px;
            }
            .shindo_ichiran_kakutitle .kasho_small, #shindo_ichiran .small {
                font-size: 80%;
            }
            .btns {
                position: absolute;
                bottom: 10px;
                left: 10px;
                z-index: 10000;
                user-select: none;
            }
            .setsumei, #quakelist, #reload, #map_ichi, #test, #btn_shindo_ichiran, #autoreload, #display_onoff_point_check, #view_info {
                display: inline-block;
                background: #00000088;
                border: white 2.5px solid;
                border-radius: 5px;
                color: white;
                padding: 5px;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 0.9rem;
                cursor: pointer;
            }
            #reload_num, #autoreload_num {
                background: #00000000;
                border: 0;
                width: 2rem;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 0.9rem;
                color: white;
                border-bottom: #ffffff 1px solid;
            }
            .setsumei {
                cursor: default;
            }
            .autoreload_setsumei.on {
                background: #ffffff;
                color: black;
            }
            .autoreload_setsumei.on button, .autoreload_setsumei.on input {
                color: black!important;
            }
            .autoreload_setsumei.on input {
                border-bottom: #000000 1px solid!important;
            }
            #shindo_ichiran {
                width: 30rem;
                height: 80%;
                position: absolute;
                right: 3rem;
                top: 3%;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 1.5rem;
                padding: 1%;
                color: #000000;
                background: #ffffff;
                border: #1f57be 3px solid;
                border-radius: 5px;
                z-index: 10000;
                overflow-y: auto;
                overflow-x: hidden;
                display: none;
            }
            #shindo_ichiran.display {
                display: initial;
                animation: shindo_ichiran_display 0.5s ease-in-out 0s;
            }
            #shindo_ichiran.display_none {
                animation-fill-mode: forwards;
                animation: shindo_ichiran_display_back 0.5s ease-in-out 0s;
            }
            
            #shindo_ichiran ruby {
                white-space: nowrap;
            }
            #shindo_ichiran rt {
                font-size: 0.7em;
            }
            #shindo_ichiran .display {
                display: none;
            }
            #shindo_ichiran .shindo_ichiran_title {
                position: relative;
                text-align: center;
                font-size: 2rem;
                color: #1f57be;
                padding: 0 calc(100% - 10em);
            }
            #shindo_ichiran #shindoichiran_title_num {
                text-align: center;
                margin: 0.25em 0;
                font-size: 1.5rem;
                color: #1f57be;
            }
            #shindo_ichiran .shindo_ichiran_title::before,
            #shindo_ichiran .shindo_ichiran_title::after {
                content: '';
                position: absolute;
                top: 50%;
                display: inline-block;
                width: calc(100% - 11em);
                height: 3px;
                border-top: 3px solid #1f57be;
            }
            #shindo_ichiran .shindo_ichiran_title::before {left:0;}
            #shindo_ichiran .shindo_ichiran_title::after {right: 0;}
            #shindo__article, #shindo7_article, #shindo65_article, #shindo60_article, #shindo55_article, #shindo50_article, #shindo4_article, #shindo3_article, #shindo2_article, #shindo1_article {
                margin-top: 0.3em;
                margin-bottom: 0.7em;
                font-size: 0.8em;
                margin-left: 0.5em;
            }
            #shindo_ichiran hr {
                border-bottom: #1f57be 2px solid;
                margin: 0.5em 0;
            }
            #shindo_ichiran::-webkit-scrollbar {
                width: 14px;
            }
            #shindo_ichiran::-webkit-scrollbar-track {
                background: #e4e4e4;
            }
            #shindo_ichiran::-webkit-scrollbar-thumb {
                background: #5a5a5a;
                border: transparent 3.5px solid;
                border-radius: 16px;
                background-clip: content-box;
            }
            #theme_set input[type=radio], #icon_theme_set input[type=radio], #display_onoff input[type=checkbox], #ui_display_onoff input[type=checkbox] {
                display: none;
            }
            #theme_set label, #icon_theme_set label, #display_onoff label, #ui_display_onoff label {
                display: inline-block;
                background: #00000000;
                border: white 2.5px solid;
                border-radius: 5px;
                color: white;
                padding: 3px 5px;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 0.9rem;
                cursor: pointer;
            }
            #theme_set label:first-of-type, #icon_theme_set label:first-of-type, #display_onoff label:first-of-type, #ui_display_onoff label:first-of-type {
                margin-left: 3px;
            }
            #theme_set input[type=radio]:checked+label, #icon_theme_set input[type=radio]:checked+label, #display_onoff input[type=checkbox]:checked+label, #ui_display_onoff input[type=checkbox]:checked+label {
                background: #ffffff;
                color: black;
            }
            .shindoichiran input[type=checkbox], #shindoiconbig_check {
                display: none;
            }
            .shindoichiran label, #shindoiconbig_check+label {
                display: inline-block;
                background: #00000088;
                border: white 2.5px solid;
                border-radius: 5px;
                color: white;
                padding: 5px;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 0.9rem;
                cursor: pointer;
            }
            .shindoichiran input[type=checkbox]:checked+label, #shindoiconbig_check:checked+label {
                background: #ffffff;
                color: black;
            }

            @keyframes shindo_ichiran_display {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
            @keyframes shindo_ichiran_display_back {
                0% { opacity: 1; }
                100% { opacity: 0; 
                }
            }
            #appinfo {
                display: none;
                position: absolute;
                width: 70vw;
                height: 80vh;
                top: 50%;
                left: 50%;
                transform: translate(-50%,-50%);
                background-color: #116637;
                border-radius: 10px;
                box-shadow: 0px 0px 15px 5px #5c5c5c;
                padding: 5vh 10vw;
                font-family: 'Noto Sans JP';
                font-size: 1.5rem;
                color: #ffffff;
                overflow-y: scroll;
                z-index: 20000000;
            }
            #appinfo.display {
                display: block;
            }
            #info_closebtn {
                position: absolute;
                font-size: 35px;
                right: 2rem;
                top: 2rem;
                cursor: pointer;
                user-select: none;
                transition: transform 0.25s ease-in-out 0s;
            }
            #info_closebtn:hover {
                background-color: #80808080;
                border-radius: 5px;
                transform: rotate(-90deg);
            }
            .inyomoto td {
                padding: 0 5px;
            }

            .info {
                position: absolute;
                top: calc(30px + 40px + 1.6rem + 1.4rem + 30px);
                left: 15px;
                z-index: 10000;
                padding: 10px;
                font-size: 1.6rem;
                background: #00000088;
                color: white;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                line-height: 2rem;
                display: none;
            }
            .info.display {
                display: block;
            }
            .leaflet-tooltip {
                background-color: rgba(255, 255, 255);
                box-shadow: 0px 3px 5px 1px rgba(0, 0, 0, 0.2);
                border-radius: 0!important;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                font-size: 1.6rem;
                padding: 5px;
            }
            .leaflet-tooltip:before, .leaflet-tooltip:after {
                content: "";
            }
            .leaflet-popup-content-wrapper, .leaflet-popup-tip {
                background-color: rgba(255, 255, 255, 0.9);
                box-shadow: 0px 3px 5px 1px rgba(0, 0, 0, 0.2);
                border-radius: 0!important;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                padding: 5px;
            }
            .leaflet-tooltip rt {
                font-size: 0.7em;
            }
            .center_circle_tooltip {
                line-height: 1.2em;
                font-weight: 500;
                padding: 7px;
                padding-top: calc(7px + 0.7em);
            }
            #info2 {
                top: calc(30px + 40px + 1.6rem * 6 + 1.4rem + 30px);
            }
            #info2 td {
                padding: 0 3px;
            }
            #info3 {max-width: 14em;font-size: 1.4rem;line-height: 1.7rem;}
            #text_yososhindo {
                width: 100%;
                height: 100%;
                z-index: 15000;
                background-color: #00000099;
                position: absolute;
                top: 0;
                left: 0;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                font-weight: 500;
                display: none;
                backdrop-filter: blur(5px);
            }
            #text_yososhindo.display {display: block;}
            #close_text_yososhindo, #close_mikata_text_yososhindo {position: absolute;font-size: 1.3rem;color: white;top: 0px;right: 0px;cursor: pointer;padding: 5px;}
            #btn_mikata_text_yososhindo {font-weight: 500;font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';position: absolute;font-size: 1rem;color: white;bottom: 3px;left: 3px;background-color: #00000000;border: white 2px solid;border-radius: 5px;padding: 3px;cursor: pointer;}
            #text_yososhindo div.mihon {width: 90%;margin: auto;font-size: 1.5rem;text-align: center;}
            #text_yososhindo div.mihon div {width: calc(25% - 16px);margin: 10px 3px;display: inline-block;padding: 5px;outline: #ffffff 2px solid;}
            #text_yososhindo table {
                width: 90%;
                height: 90%;
                margin: auto;
                table-layout: fixed;
                border-spacing: 5px;
                font-size: 1.5rem;
                overflow-y: scroll;
                display: block;
                z-index: 15000;
                position: relative;
            }
            #text_yososhindo table::-webkit-scrollbar{width: 5px;}
            #text_yososhindo table::-webkit-scrollbar-track{background-color: #00000000;}
            #text_yososhindo table::-webkit-scrollbar-thumb{background-color: #ffffff55;}
            #text_yososhindo table tbody:nth-child(1) tr:nth-child(1) {
                text-align: center;
                position: sticky;
                top: 0;
            }
            #text_yososhindo table tr {width: 100%;}
            #text_yososhindo table tr td {
                padding: 5px 8px;
                background-color: #242424;
                border: #ffffff 2px solid;
                color: white;
            }
            #text_yososhindo table tr td:nth-child(1) {
                width: 40vw;
                padding-top: calc(0.6em + 3px);
            }
            #text_yososhindo table tr td:nth-child(2) {width: 10vw;}
            #text_yososhindo table tr td:nth-child(3) {width: 26vw;}
            #text_yososhindo table tr td:nth-child(4) {width: 14vw;}
            #text_yososhindo tr.color1 {& td {background-color: #dd00dd;color: #ffffff;}}
            #text_yososhindo tr.color2 {& td {background-color: #ff1400;color: #ffffff;}}
            #text_yososhindo tr.color3 {& td {background-color: #faf500;color: #000000;}}
            #text_yososhindo tr.color4 {& td {background-color: #00ccff;color: #000000;}}
            #text_yososhindo tr.color5 {& td {background-color: #ff140088;color: #ffffff;}}
            #text_yososhindo tr.color6 {& td {background-color: #faf50088;color: #000000;}}
            rt {font-size: 0.6em;}
            
            #mikata_text_yososhindo {
                width: 100%;
                height: 100%;
                z-index: 17000;
                background-color: #00000099;
                position: absolute;
                top: 0;
                left: 0;
                display: none;
                backdrop-filter: blur(5px);
            }
            #mikata_text_yososhindo.display {display: block;}
            #mikata_text_yososhindo img {max-width: 90%;max-height: calc(100% - (2.6rem + 16px));margin: calc(1.3rem + 8px) auto;display: block;}
            #menu-close {
                position: absolute;
                left: 10px;
                top: 10px;
                font-size: 40px;
                z-index: 100;
                user-select: none;
                cursor: pointer;
                color: white;
            }
            #menu {
                position: absolute;
                width: 100%;
                height: 100%;
                top: -100vh;
                left: 0;
                background: #105dd1aa;
                color: white;
                backdrop-filter: blur(5px);
                font-size: 1.5rem;
                font-family: "ヒラギノ角ゴ-Pro",'Noto Sans JP';
                transition: all 0.7s ease-in-out;
                z-index: 50000;
            }
            #menu.display {
                top: 0;
            }
            #menu a {color: white;}
            #menu table {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%,-50%);
            }
            #menu table td {
                padding: 5px;
            }
            #menu table td:nth-child(1) {
                padding-left: 1.5em;
            }
            #menu table td.header {
                padding-left: 0.5em;
            }
        </style>
    </head>
    <body>
        <div id="map" class="background_nerv"></div>
        <div id="title" class="display">
            <div id="title_text">津波情報図 - 海岸線モード</div>
            <div id="title_time">00<span class="small">月</span>00<span class="small">日</span> 00<span class="small">時</span>00<span class="small">分</span>00<span class="small">秒</span>現在</div>
        </div>
        <div id="info1" class="info">
            マウスホバー中の地域<br>
            発表地域：<br>
            発表種類：
        </div>
        <div id="info2" class="info">
            <table cellspacing="0" cellpadding="0">
                <tr>
                    <td></td>
                    <td><span style="font-size: 0.7em;">以上</span></td>
                    <td></td>
                </tr>
                <tr><td style="color: #8900c7;">█</td><td>5m</td><td>～</td></tr>
                <tr><td style="color: #ff00d9;">█</td><td>3m</td><td>～</td></tr>
                <tr><td style="color: #fd000d;">█</td><td>2m</td><td>～</td></tr>
                <tr><td style="color: #ff7a00;">█</td><td>1m</td><td>～</td></tr>
                <tr><td style="color: #e2df24;">█</td><td>0.5m</td><td>～</td></tr>
                <tr><td style="color: #10b4eb;">█</td><td>～</td><td>0.5m</td></tr>
                <tr><td style="color: #1adf11;">█</td><td colspan="2">観測中</td></tr>
            </table>
        </div>
        <div id="info3" class="info"></div>

        <div class="btns">
            <div>
                <select id="quakelist" style="width: 25em;height: calc(2em + 5px);"><option>津波情報の取得中…</option></select>
                <button id="reload">情報更新</button>
                <button id="map_ichi">位置初期化</button>
                <button id="btn_text_yososhindo" class="setsumei">津波到達時刻・高さ</button>
                <button id="menu-open-btn">情報</button>
                <span class="setsumei" id="display_onoff" style="padding: 2px 5px;">表示 
                    <input type="checkbox" name="shindo_ichiran" id="display_onoff_point_check" checked><label for="display_onoff_point_check">観測点</label>
                    <input type="checkbox" name="shindo_ichiran" id="display_onoff_fill_check" checked><label for="display_onoff_fill_check">海岸線</label>
                </span>
                <span class="setsumei" id="ui_display_onoff" style="padding: 2px 5px;">UI 
                    <input type="checkbox" name="shindo_ichiran" id="ui_display_onoff_title_check" checked><label for="ui_display_onoff_title_check">１</label>
                    <input type="checkbox" name="shindo_ichiran" id="ui_display_onoff_info1_check" checked><label for="ui_display_onoff_info1_check">２</label>
                    <input type="checkbox" name="shindo_ichiran" id="ui_display_onoff_info2_check" checked><label for="ui_display_onoff_info2_check">３</label>
                </span>
            </div>
            
        </div>

        <div id="text_yososhindo">
            <span id="close_text_yososhindo">×</span>
            <button id="btn_mikata_text_yososhindo">見方</button>
            <div class="mihon">
                <div style="background-color: #dd00dd;color: #ffffff;">大津波警報</div><div style="background-color: #ff1400;color: #ffffff;">津波警報</div><div style="background-color: #faf500;color: #000000;">津波注意報</div><div style="background-color: #00ccff;color: #000000;">津波予報<span style="font-size: 0.7em;">(情報表示未対応)</span></div>
            </div>
            <table id="table_text_yososhindo">
                <tr><td><ruby>地域名<rt>ちいきめい</rt></ruby></td><td>到達時刻</td><td>到達状況</td><td>大きさ</td></tr>
            </table>
            <div id="mikata_text_yososhindo">
                <span id="close_mikata_text_yososhindo">×</span>
                <img id="img_mikata_text_yososhindo" src="source/doc/point_mikata_text_yososhindo.png">
                <!-- <img src="source/tsunami/mikata_text_yososhindo.png"> -->
            </div>
        </div>

        <div id="menu">
            <span class="material-symbols-rounded" id="menu-close">close</span>
            <table>
                <tr><td colspan="4" class="header">情報提供元</td></tr>
                <tr><td>・</td><td>GeoJSON地図データ</td><td>by</td><td>Natural Earth</td></tr>
                <tr><td>・</td><td>GeoJSON海岸線データ</td><td>by</td><td>基盤地図情報</td></tr>
                <tr><td>・</td><td>Web地図システム</td><td>by</td><td>Leaflet</td></tr>
                <tr><td>・</td><td>PHPサーバー津波情報</td><td>by</td><td>MiyakojimaCam</td></tr>
                <tr><td>・</td><td>津波情報</td><td>by</td><td>P2P地震情報</td></tr>
            </table>
        </div>

        <script src="../../static/js/SmoothWheelZoom.js"></script>
        <script src="source/stationscode.js"></script>
        <script src="source/tsunamidata2.js"></script>
        <script>
            document.getElementById('menu-open-btn').addEventListener("click",()=>{
                    document.getElementById('menu').classList.add("display");
            });
            document.getElementById('menu-close').addEventListener("click",()=>{
                    document.getElementById('menu').classList.remove("display");
            });
        </script>
        <script>
            var map = L.map('map', {
                center: [36.575, 137.984],
                zoom: 5.2,
                minZoom: 2,
                scrollWheelZoom: false,
                smoothWheelZoom: true,
                smoothSensitivity: 1.5,
                preferCanvas:false,
            });
            L.control.scale({ maxWidth: 150, position: 'bottomright', imperial: false }).addTo(map);  // スケールを表示
            map.zoomControl.setPosition('topright');
            var PolygonLayer_Style_nerv_1 = {
                "color": "#ffffff",
                "weight": 1,
                "opacity": 1,
                "fillColor": "#3a3a3a",
                "fillOpacity": 1,
            }
            var PolygonLayer_Style_nerv_2 = {
                "color": "#999999",
                "weight": 1,
                "opacity": 1,
                "fillOpacity": 0,
            }
            var PolygonLayer_Style_nerv_3 = {
                "color": "#999999",
                "weight": 0.5,
                "opacity": 1,
                "fillOpacity": 0,
            }
            var PolygonLayer_Style_wni_1 = {
                "color": "#000000",
                "weight": 0.8,
                "opacity": 1,
                "fillColor": "#ffffff",
                "fillOpacity": 1,
            }
            var PolygonLayer_Style_wni_2 = {
                "color": "#ffffff",
                "weight": 1,
                "opacity": 1,
                "fillOpacity": 0,
            }
            var PolygonLayer_Style_wni_3 = {
                "color": "#999999",
                "weight": 0.6,
                "opacity": 1,
                "fillOpacity": 0,
            }
            var PolygonLayer_Style_quarog_1 = {
                "color": "#334948",
                "weight": 1.2,
                "opacity": 1,
                "fillColor": "#508C78",
                "fillOpacity": 1,
            }
            var PolygonLayer_Style_quarog_2 = {
                "color": "#334948",
                "weight": 1,
                "opacity": 1,
                "fillOpacity": 0,
            }
            var PolygonLayer_Style_quarog_3 = {
                "color": "#334948",
                "weight": 0.5,
                "opacity": 1,
                "fillOpacity": 0,
            }
            var PolygonLayer_Style_test_tsunami_1 = {
                "color": "#dd00dd",
                "weight": 8,
                "opacity": 1,
            }
            var PolygonLayer_Style_test_tsunami_2 = {
                "color": "#ff1400",
                "weight": 7,
                "opacity": 1,
            }
            var PolygonLayer_Style_test_tsunami_2_kaijo = {
                "color": "#ff1400",
                "weight": 5,
                "opacity": 1,
                "dashArray": "3 8"
            }
            var PolygonLayer_Style_test_tsunami_3 = {
                "color": "#faf500",
                "weight": 7,
                "opacity": 1,
            }
            var PolygonLayer_Style_test_tsunami_3_kaijo = {
                "color": "#faf500",
                "weight": 5,
                "opacity": 1,
                "dashArray": "3 8"
            }
            var PolygonLayer_Style_test_tsunami_4 = {
                "color": "#00ccff",
                "weight": 7,
                "opacity": 1,
            }
            map.createPane("tsunami_map").style.zIndex = 110; //津波
            map.createPane("tsunami_map2").style.zIndex = 120; //津波
            map.createPane("pane_map").style.zIndex = 5; //地図
            map.createPane("shindo10").style.zIndex = 10;
            map.createPane("shindo20").style.zIndex = 20;
            map.createPane("shindo30").style.zIndex = 30;
            map.createPane("shindo40").style.zIndex = 40;
            map.createPane("shindo45").style.zIndex = 45;
            map.createPane("shindo46").style.zIndex = 46;
            map.createPane("shindo50").style.zIndex = 50;
            map.createPane("shindo55").style.zIndex = 55;
            map.createPane("shindo60").style.zIndex = 60;
            map.createPane("shindo70").style.zIndex = 70;
            map.createPane("shingen").style.zIndex = 100; //震源
            Cookies.remove('visited');
            var japan; //都道府県
            var asia; //アジア地域高品質ポリゴン 
            var countries; //アジア地域を除く世界の低品質ポリゴン  
            var cities; //市区町村
            var japan_data; //都道府県データ
            var asia_data; //アジア地域高品質ポリゴンデータ 
            var countries_data; //アジア地域を除く世界の低品質ポリゴンデータ
            var cities_data; //市区町村データ
            $.getJSON("https://miyakocam.github.io/geojsons/pref.geojson", function (data) {
                japan_data = data;
                japan = L.geoJson(japan_data, {
                    pane: "pane_map",
                    style: PolygonLayer_Style_nerv_1,
                }).addTo(map);
            }); 
            $.getJSON("https://miyakocam.github.io/geojsons/asia.geojson", function (data) {
                asia_data = data;
                asia = L.geoJson(asia_data, {
                    pane: "pane_map",
                    style: PolygonLayer_Style_nerv_2,
                }).addTo(map);
            });     
            $.getJSON("https://miyakocam.github.io/geojsons/countries.geojson", function (data) {
                countries_data = data;
                countries = L.geoJson(countries_data, {
                    pane: "pane_map",
                    style: PolygonLayer_Style_nerv_2,
                }).addTo(map);
            });
            $.getJSON("https://miyakocam.github.io/geojsons/cities.geojson", function (data) {
                cities_data = data;
                cities = L.geoJson(cities_data, {
                    pane: "pane_map",
                    style: PolygonLayer_Style_nerv_3,
                });
            });
            var TsunamiStations;
            $.getJSON("source/stations.json")
            .done (function (data) {
                TsunamiStations = data;
            });
            var AreaNameToYomi;
            $.getJSON("source/areanamekana.json")
            .done (function (data) {
                AreaNameToYomi = data;
            });
            

            map.on('zoomend', function(e) {
                if (cities) {
                    if (map.getZoom() < 7) {
                        map.removeLayer(cities);
                    } else {
                        cities.addTo(map);
                    }
                }
            });
            if (cities) {
                    
                        cities.addTo(map);
                    
                }

            var list = document.getElementById('quakelist');
            list.onchange = event => {
                console.log(list.selectedIndex);
                QuakeSelect(list.selectedIndex);
            }

            var QuakeJson;
            var TsunamiJson;
            var shindo_layer = L.layerGroup();
            var shindo_layer2 = L.layerGroup();
            var shindo_layer3 = L.layerGroup();
            var QuakeDetails;
            var foreOrObse = [];
            var point_onoff = 1; //0:off, 1:on
            var fill_onoff = 1; //0:off, 1:on

            async function GetQuake(option) {
                var url = "https://www.jma.go.jp/bosai/tsunami/data/list.json";
                const response = await fetch(url)
                .then(response => response.json())
                .then(data => {
                    QuakeJson = data;
                    gettime = new Date();
                    var getmonth = ('0' + (gettime.getMonth() + 1)).slice(-2);
                    var getday = ('0' + gettime.getDate()).slice(-2);
                    var gethour = ('0' + gettime.getHours()).slice(-2);
                    var getminute = ('0' + gettime.getMinutes()).slice(-2);
                    var getsecond = ('0' + gettime.getSeconds()).slice(-2);
                    document.getElementById('title_time').innerHTML = getmonth+'<span class="small">月</span>'+getday+'<span class="small">日</span> '+gethour+'<span class="small">時</span>'+getminute+'<span class="small">分</span>'+getsecond+'<span class="small">秒</span>現在';
                    var int = 0;
                    while (list.lastChild) {
                        list.removeChild(list.lastChild);
                    }
                    foreOrObse = [];
                    QuakeJson.forEach(element => {
                            var option = document.createElement("option");
                            var text;
                            var test = "";
                            var firstPoint = "";
                            var datetime = element["rdt"].split("T");
                            var datetime0 = datetime[0].split("-");
                            var datetime1 = datetime[1].split(":");
                            var time = datetime0[0].substring(2,4)+"/"+datetime0[1]+"/"+datetime0[2]+" "+datetime1[0]+"時"+datetime1[1]+"分発表";
                            //foreOrObseは、0=津波警報系、1=津波観測に関する情報、2=各地の満潮時刻系、3=沖合の津波観測に関する情報、10=エラーを示す。
                            if (element["ttl"].indexOf("津波予報") !== -1) { // 津波警報・注意報・予報
                                text = element["ttl"];
                                foreOrObse.push(0);
                            } else { // (沖合の)津波観測に関する情報・各地の満潮時刻・津波到達予想時刻に関する情報
                                if (element["ttl"].indexOf("各地の満潮時刻") !== -1) { // 各地の満潮時刻・津波到達予想時刻に関する情報
                                    text = element["ttl"];
                                    foreOrObse.push(2);
                                } else if (element["ttl"].indexOf("沖合の津波観測に関する情報") !== -1) { // 沖合の津波観測に関する情報
                                    text = element["ttl"];
                                    foreOrObse.push(3);
                                } else if (element["ttl"].indexOf("津波観測に関する情報") !== -1) { // 津波観測に関する情報
                                    text = element["ttl"];
                                    foreOrObse.push(1);
                                } else { // error
                                    text = "その他";
                                    foreOrObse.push(10);
                                }
                            }
                            // if (element["areas"] == "") {
                            //     nashi = "【データなし】";
                            // } else {
                            //     firstPoint = element["areas"][0]["name"];
                            // }
                            // text = element["issue"]["time"]+" "+firstPoint;
                            option.textContent = test + time + "　" + text;
                            list.appendChild(option);
                    });
                    setTimeout(() => {
                        
                    QuakeSelect(0);
                    }, 50);
                })
            }

            function QuakeSelect(num) {
                var mapAdd = false;
                var mapAdd_num = 0;
                var tsunami_forecast_howmany;

                if (shindo_layer) {map.removeLayer(shindo_layer);}
                if (shindo_layer2) {map.removeLayer(shindo_layer2);}
                if (shindo_layer3) {map.removeLayer(shindo_layer3);}
                shindo_layer = L.layerGroup();
                shindo_layer2 = L.layerGroup();
                shindo_layer3 = L.layerGroup();
                
                $.getJSON("https://www.jma.go.jp/bosai/tsunami/data/"+QuakeJson[num]["json"])
                .done (function (data) {
                    QuakeDetails = "";
                    QuakeDetails = data;
                    allInfoRemove();
                    if (foreOrObse[num] == 0 || foreOrObse[num] == 1) { //津波警報・注意報・予報
                        document.getElementById('title_text').innerText = "津波情報図 - 海岸線モード";
                        document.getElementById('info1').classList.add("display");
                        document.getElementById('ui_display_onoff_info1_check').checked = true;
                        tsunami_forecast_howmany = QuakeDetails["Body"]["Tsunami"]["Forecast"]["Item"].length;
                        console.log(tsunami_forecast_howmany)
                        shindo_layer = L.layerGroup();
                        QuakeDetails["Body"]["Tsunami"]["Forecast"]["Item"].forEach(element => {
                            let name = element["Area"]["Name"];
                            var url = "https://nanka.cloudfree.jp/webapps/tsunami/source/geojson/"+name+".geojson";
                            var color_Style;
                            var type;
                            var nodraw = false;
                            if (element["Category"]["Kind"]["Code"] == "52" || element["Category"]["Kind"]["Code"] == "53") {
                                color_Style = PolygonLayer_Style_test_tsunami_1;
                                type = "大津波警報";
                            } else if (element["Category"]["Kind"]["Code"] == "50") {
                                color_Style = PolygonLayer_Style_test_tsunami_2_kaijo;
                                type = "津波警報解除";
                            } else if (element["Category"]["Kind"]["Code"] == "51") {
                                color_Style = PolygonLayer_Style_test_tsunami_2;
                                type = "津波警報";
                            } else if (element["Category"]["Kind"]["Code"] == "60") {
                                color_Style = PolygonLayer_Style_test_tsunami_3_kaijo;
                                type = "津波注意報解除";
                            } else if (element["Category"]["Kind"]["Code"] == "62") {
                                color_Style = PolygonLayer_Style_test_tsunami_3;
                                type = "津波注意報";
                            } else if (element["Category"]["Kind"]["Code"] == "71" || element["Category"]["Kind"]["Code"] == "72" || element["Category"]["Kind"]["Code"] == "73") {
                                color_Style = PolygonLayer_Style_test_tsunami_4;
                                type = "津波予報";
                            } else if (element["Category"]["Kind"]["Code"] == "00") {
                                nodraw = true;
                            }
                            if (nodraw == false) {
                                $.getJSON(url)
                                .done(function (data) {
                                    var line = L.geoJson(data, {
                                        pane: "tsunami_map",
                                        style: color_Style,
                                        popupAnchor: [0, -40]
                                    });
                                    line.on('mouseover', function (e) {
                                        mousehover(name,type);
                                    });
                                    shindo_layer.addLayer(line);
                                    if (mapAdd_num == tsunami_forecast_howmany - 1) {
                                        mapAdd = true;
                                    } else {
                                        mapAdd_num++;
                                    }
                                });
                            }
                            console.log(name+" "+element["Category"]["Kind"]["Code"]+" "+type);
                        });
                        function mapAddtimeout() {
                            setTimeout(() => {
                                if (mapAdd == true) {
                                    if (fill_onoff == 1) {
                                        shindo_layer.addTo(map);
                                    }
                                } else {
                                    mapAddtimeout();
                                    console.warn("繰り返しています…。");
                                }
                            }, 200);
                        }
                        mapAddtimeout();

                        if (foreOrObse[num] == 1) { //津波観測に関する情報
                            document.getElementById('title_text').innerText = "津波情報図 - 観測点モード";
                            document.getElementById('info2').classList.add("display");
                            document.getElementById('ui_display_onoff_info2_check').checked = true;
                            shindo_layer2 = L.layerGroup();
                            QuakeDetails["Body"]["Tsunami"]["Observation"]["Item"].forEach(element => {
                                element["Station"].forEach(element2 => {
                                    var result = TsunamiStationsCode.indexOf(Number(element2["Code"]));
                                    console.log(element2["Code"]);
                                    console.log(result);
                                    //resultは観測点コードの中で探した結果（順番）を返す
                                    if (result != -1) {
                                        //magnitudeは、0=5M～、1=3M～、2=2M～、3=1M～、4=0.5M～、5=～0.5M、6=観測中を示す。
                                        var magnitude;
                                        var value;
                                        if (element2["MaxHeight"]["Condition"] && !element2["MaxHeight"]["TsunamiHeight"]) { //観測中の場合
                                            value = "観測中";
                                            magnitude = 6;
                                        } else {
                                            value = Number(element2["MaxHeight"]["TsunamiHeight"]);
                                            magnitude = value >= 5 ? 0 :
                                                        value >= 3 ? 1 :
                                                        value >= 2 ? 2 :
                                                        value >= 1 ? 3 :
                                                        value >= 0.5 ? 4 :
                                                                    5 ;
                                            value = value + "m";
                                        }
                                        var color = magnitude == 0 ? "#8900c7" :
                                                    magnitude == 1 ? "#ff00d9" :
                                                    magnitude == 2 ? "#fd000d" :
                                                    magnitude == 3 ? "#ff7a00" :
                                                    magnitude == 4 ? "#e2df24" :
                                                    magnitude == 5 ? "#10b4eb" :
                                                    magnitude == 6 ? "#1adf11" :
                                                                "#00000000" ;
                                        var circle_style = {
                                            "radius": 12,
                                            "color": "#000000",
                                            "fillColor": color,
                                            "weight": 2,
                                            "opacity": 1,
                                            "fillOpacity": 1,
                                            "pane": "tsunami_map2"
                                        }
                                        let shindo_latlng = new L.LatLng(TsunamiStations["items"][result]["latitude"], TsunamiStations["items"][result]["longitude"]);
                                        let circle = L.circleMarker(shindo_latlng,  circle_style );
                                        circle.bindTooltip('<ruby>'+element2["Name"] + '<rt style="font-size: 0.7em;">' + TsunamiStations["items"][result]["kana"] + '</rt></ruby>　'+value ,{className: "center_circle_tooltip"})
                                        shindo_layer2.addLayer(circle);
                                    }
                                });
                            });
                            if (point_onoff == 1) {
                                shindo_layer2.addTo(map);
                            }
                            yososhindoCreate(1);
                        } else {
                            yososhindoCreate();
                        }
                    } else if (foreOrObse[num] == 2) { //各地の満潮時刻・津波到達予想時刻に関する情報
                        yososhindoCreate();
                        document.getElementById('text_yososhindo').classList.add("display");
                    } else if (foreOrObse[num] == 3) { //沖合の津波観測に関する情報
                        document.getElementById('title_text').innerText = "津波情報図 - 観測点モード";
                        document.getElementById('info2').classList.add("display");
                        document.getElementById('ui_display_onoff_info2_check').checked = true;
                        document.getElementById('info3').classList.add("display");
                        document.getElementById('info3').innerText = QuakeDetails["comment"]["warning"]["text"];
                        shindo_layer3 = L.layerGroup();
                        QuakeDetails["tsunami_observation"].forEach(element => {
                            var result = TsunamiStationsCode.indexOf(Number(element["station_code"]));
                            console.log(element["station_code"]);
                            console.log(result);
                            //resultは観測点コードの中で探した結果（順番）を返す
                            if (result != -1) {
                                //magnitudeは、0=5M～、1=3M～、2=2M～、3=1M～、4=0.5M～、5=～0.5M、6=観測中を示す。
                                var magnitude;
                                var value;
                                if (element["MaxHeight"]["condition"] && !element["MaxHeight"]["value"]) { //観測中の場合
                                    value = "観測中";
                                    magnitude = 6;
                                } else {
                                    value = Number(element["MaxHeight"]["value"].replace("m",""));
                                    magnitude = value >= 5 ? 0 :
                                                value >= 3 ? 1 :
                                                value >= 2 ? 2 :
                                                value >= 1 ? 3 :
                                                value >= 0.5 ? 4 :
                                                            5 ;
                                    value = value + "m";
                                }
                                var color = magnitude == 0 ? "#8900c7" :
                                            magnitude == 1 ? "#ff00d9" :
                                            magnitude == 2 ? "#fd000d" :
                                            magnitude == 3 ? "#ff7a00" :
                                            magnitude == 4 ? "#e2df24" :
                                            magnitude == 5 ? "#10b4eb" :
                                            magnitude == 6 ? "#1adf11" :
                                                        "#00000000" ;
                                var circle_style = {
                                    "radius": 12,
                                    "color": "#000000",
                                    "fillColor": color,
                                    "weight": 2,
                                    "opacity": 1,
                                    "fillOpacity": 1,
                                    "pane": "tsunami_map2"
                                }
                                let shindo_latlng = new L.LatLng(TsunamiStations["items"][result]["latitude"], TsunamiStations["items"][result]["longitude"]);
                                let circle = L.circleMarker(shindo_latlng,  circle_style );
                                circle.bindTooltip('<ruby>'+element["station_name"] + '<rt style="font-size: 0.7em;">' + element["station_yomi"] + '</rt></ruby>　'+value ,{className: "center_circle_tooltip"})
                                shindo_layer3.addLayer(circle);
                            }
                        });
                        if (point_onoff == 1) {
                            shindo_layer3.addTo(map);
                        }
                        
                        yososhindoCreate(3);
                    }
                });
            }

            GetQuake();

            function mousehover(name,type) {
                let info = document.getElementById('info1');
                info.innerHTML = "マウスホバー中の地域<br>発表地域："+'<ruby>'+name+'<rt>'+AreaNameToYomi[name]+'</rt></ruby>'+"<br>発表種類："+type;
                if (type == "大津波警報") {
                    info.style.background = "#dd00ddcc";
                    info.style.color = "#ffffff";
                } else if (type == "津波警報" || type == "津波警報解除") {
                    info.style.background = "#ff1400cc";
                    info.style.color = "#ffffff";
                } else if (type == "津波注意報" || type == "津波注意報解除") {
                    info.style.background = "#faf500cc";
                    info.style.color = "#000000";
                } else if (type == "津波予報") {
                    info.style.background = "#00ccffcc";
                    info.style.color = "#000000";
                }
            }

            function allInfoRemove() {
                document.getElementById('info1').classList.remove("display");
                document.getElementById('ui_display_onoff_info1_check').checked = false;
                document.getElementById('info2').classList.remove("display");
                document.getElementById('ui_display_onoff_info2_check').checked = false;
                document.getElementById('info3').classList.remove("display");
            }

            function yososhindoCreate(aforeOrObse) {
                if (aforeOrObse == 1) { // 観測点ごと
                    document.getElementById('img_mikata_text_yososhindo').src = "source/doc/point_mikata_text_yososhindo.png";
                    document.getElementById('table_text_yososhindo').innerHTML = '<tr><td><ruby>観測点名<rt>カンソクテンメイ</rt></ruby></td><td>到達時刻</td><td>到達状況</td><td>大きさ</td></tr>';
                    var arr_kind_code = {}; // {"505": {"code": 1, "text": "大津波警報"}, "102"…}のように、{"地域コード": {"code": tsunamiKindの数字, "text": "警報日本語"}}というようにする。
                    QuakeDetails["Body"]["Tsunami"]["Forecast"]["Item"].forEach(element => { //注意報警報区別のため。
                        var tsunamiKind;
                        var type;
                        if (element["Category"]["Kind"]["Code"] == "52" || element["Category"]["Kind"]["Code"] == "53") {
                            tsunamiKind = 1;
                            type = "大津波警報";
                        } else if (element["Category"]["Kind"]["Code"] == "50") {
                            tsunamiKind = 5;
                            type = "津波警報解除";
                        } else if (element["Category"]["Kind"]["Code"] == "51") {
                            tsunamiKind = 2;
                            type = "津波警報";
                        } else if (element["Category"]["Kind"]["Code"] == "60") {
                            tsunamiKind = 6;
                            type = "津波注意報解除";
                        } else if (element["Category"]["Kind"]["Code"] == "62") {
                            tsunamiKind = 3;
                            type = "津波注意報";
                        } else if (element["Category"]["Kind"]["Code"] == "71" || element["Category"]["Kind"]["Code"] == "72" || element["Category"]["Kind"]["Code"] == "73") {
                            tsunamiKind = 4;
                            type = "津波予報";
                        } else if (element["Category"]["Kind"]["Code"] == "00") {
                            tsunamiKind = 10;
                            type = "津波なし";
                        }
                        arr_kind_code[element["Area"]["Code"]] = {};
                        arr_kind_code[element["Area"]["Code"]]["code"] = tsunamiKind;
                        arr_kind_code[element["Area"]["Code"]]["text"] = type;
                    });
                    console.log(arr_kind_code);

                    var trs1 = ""; var trs2 = ""; var trs3 = ""; var trs4 = ""; var trs5 = ""; var trs6 = "";
                    QuakeDetails["Body"]["Tsunami"]["Observation"]["Item"].forEach(element => {
                        var tsunamiKind = arr_kind_code[element["Area"]["Code"]]["code"];
                        var type = arr_kind_code[element["Area"]["Code"]]["text"];
                        element["Station"].forEach(element2 => {
                            var result = TsunamiStationsCode.indexOf(Number(element2["Code"]));
                            var nodraw = false;
                            var info1 = "-";
                            var info2 = "-";
                            var info3 = "-";
                            var info4 = "-";
                            var innerHTML;
                            if (tsunamiKind == 10) {nodraw = true;}
                            if (nodraw == false) {
                                info1 = '<ruby>'+element2["Name"]+'<rt>'+TsunamiStations["items"][result]["kana"]+'</rt></ruby>';

                                if (element2["FirstHeight"]) {
                                    if (element2["FirstHeight"]["ArrivalTime"]) {
                                        info2 = element2["FirstHeight"]["ArrivalTime"].substring(11,13)+"時"+element2["FirstHeight"]["ArrivalTime"].substring(14,16)+"分";
                                    }
                                }
                                if (element2["MaxHeight"] && info2 == "-") {
                                    if (element2["MaxHeight"]["DateTime"]) {
                                        info2 = element2["MaxHeight"]["DateTime"].substring(11,13)+"時"+element2["MaxHeight"]["DateTime"].substring(14,16)+"分";
                                    }
                                }

                                if (element2["FirstHeight"]["Condition"]) {
                                    info3 = element2["FirstHeight"]["Condition"];
                                } else {
                                    info3 = "到達済み";
                                }

                                if (element2["MaxHeight"]["TsunamiHeight"]) {
                                    info4 = element2["MaxHeight"]["TsunamiHeight"] + "m";
                                } else {
                                    info4 = element2["MaxHeight"]["Condition"];
                                }
                                innerHTML = '<tr class="color'+tsunamiKind+'"><td>'+info1+'</td><td>'+info2+'</td><td>'+info3+'</td><td>'+info4+'</td></tr>';
                                eval('trs'+tsunamiKind+' += innerHTML');
                            }
                        });
                    });
                    for (var i = 1; i < 7; i++) {
                        eval('document.getElementById("table_text_yososhindo").innerHTML += trs'+i);
                    }

                } else if (aforeOrObse == 3) {
                    document.getElementById('img_mikata_text_yososhindo').src = "source/doc/point_mikata_text_yososhindo.png";
                    document.getElementById('table_text_yososhindo').innerHTML = '<tr><td><ruby>観測点名<rt>かんそくてんめい</rt></ruby></td><td>到達時刻</td><td>到達状況</td><td>大きさ</td></tr>';

                    QuakeDetails["tsunami_observation"].forEach(element => {
                        var nodraw = false;
                        var info1 = "-";
                        var info2 = "-";
                        var info3 = "-";
                        var info4 = "-";
                        var innerHTML;
                        if (nodraw == false) {
                            info1 = '<ruby>'+element["station_name"]+'<rt>'+element["station_yomi"]+'</rt></ruby>';

                            if (element["FirstHeight"]) {
                                if (element["FirstHeight"]["ArrivalTime"]) {
                                    info2 = element["FirstHeight"]["ArrivalTime"]["text"].substring(element["FirstHeight"]["ArrivalTime"]["text"].length - 6);
                                }
                            }
                            if (element["MaxHeight"] && info2 == "-") {
                                if (element["MaxHeight"]["datetime"]) {
                                    info2 = element["MaxHeight"]["datetime"]["text"].substring(element["MaxHeight"]["datetime"]["text"].length - 6);
                                }
                            }

                            if (element["FirstHeight"]["condition"]) {
                                info3 = element["FirstHeight"]["condition"];
                            } else {
                                info3 = "到達済み";
                            }

                            if (element["MaxHeight"]["value"]) {
                                info4 = element["MaxHeight"]["value"];
                            } else {
                                info4 = element["MaxHeight"]["condition"];
                            }
                            innerHTML = '<tr><td>'+info1+'</td><td>'+info2+'</td><td>'+info3+'</td><td>'+info4+'</td></tr>';
                            document.getElementById('table_text_yososhindo').innerHTML += innerHTML;
                        }
                    });
                } else {
                    document.getElementById('img_mikata_text_yososhindo').src = "source/doc/line_mikata_text_yososhindo.png";
                    document.getElementById('table_text_yososhindo').innerHTML = '<tr><td><ruby>地域名<rt>チイキメイ</rt></ruby></td><td>到達時刻</td><td>到達状況</td><td>大きさ</td></tr>';
                    QuakeDetails["Body"]["Tsunami"]["Forecast"]["Item"].forEach(element => {
                        var tsunamiKind;
                        var type;
                        var nodraw = false;
                        var info1 = "-";
                        var info2 = "-";
                        var info3 = "-";
                        var info4 = "-";
                        var innerHTML;
                        if (element["Category"]["Kind"]["Code"] == "52" || element["Category"]["Kind"]["Code"] == "53") {
                            tsunamiKind = 1;
                            type = "大津波警報";
                        } else if (element["Category"]["Kind"]["Code"] == "50") {
                            tsunamiKind = 5;
                            type = "津波警報解除";
                        } else if (element["Category"]["Kind"]["Code"] == "51") {
                            tsunamiKind = 2;
                            type = "津波警報";
                        } else if (element["Category"]["Kind"]["Code"] == "60") {
                            tsunamiKind = 6;
                            type = "津波注意報解除";
                        } else if (element["Category"]["Kind"]["Code"] == "62") {
                            tsunamiKind = 3;
                            type = "津波注意報";
                        } else if (element["Category"]["Kind"]["Code"] == "71" || element["Category"]["Kind"]["Code"] == "72" || element["Category"]["Kind"]["Code"] == "73") {
                            tsunamiKind = 4;
                            type = "津波予報";
                        } else if (element["Category"]["Kind"]["Code"] == "00") {
                            nodraw = true;
                        }
                        info1 = '<ruby>'+element["Area"]["Name"]+'<rt>'+AreaNameToYomi[element["Area"]["Name"]]+'</rt></ruby>';
                        if (nodraw == false) {
                            if (tsunamiKind != 5 && tsunamiKind != 6) {
                                if (element["FirstHeight"]) {
                                    if (element["FirstHeight"]["ArrivalTime"]) {
                                        info2 = element["FirstHeight"]["ArrivalTime"].substring(11,13)+"時"+element["FirstHeight"]["ArrivalTime"].substring(14,16)+"分";
                                    }
                                    if (element["FirstHeight"]["Condition"]) {
                                        info3 = element["FirstHeight"]["Condition"];
                                    } else {
                                        info3 = '未到達<span style="font-size: 0.7em;">(到達予想時刻)</span>';
                                    }
                                }
                                if (element["MaxHeight"]) {
                                    if (element["MaxHeight"]["TsunamiHeight"]) {
                                        info4 = element["MaxHeight"]["TsunamiHeight"] + "m";
                                    }
                                }
                            } else {
                                info3 = type;
                            }
                            innerHTML = '<tr class="color'+tsunamiKind+'"><td>'+info1+'</td><td>'+info2+'</td><td>'+info3+'</td><td>'+info4+'</td></tr>';
                            document.getElementById('table_text_yososhindo').innerHTML += innerHTML;
                        }
                    });
                }
            }

            document.getElementById('map_ichi').addEventListener("click",()=>{
                map.flyTo([36.575, 137.984], 5.2, { duration: 0.5 });
            });
            document.getElementById('reload').addEventListener("click",()=>{
                var koushin_ok;
                var koushin;
                clearTimeout(koushin);
                clearTimeout(koushin_ok);
                
                GetQuake();
                document.getElementById('reload').innerText = "更新中…";
                koushin = setTimeout(() => {
                    document.getElementById('reload').innerText = "更新完了";
                    koushin_ok = setTimeout(() => {
                        document.getElementById('reload').innerText = "情報更新";
                    }, 1000);
                }, 1000);
            });
            document.getElementById('btn_text_yososhindo').addEventListener("click",()=>{
                document.getElementById('text_yososhindo').classList.add("display");
            });
            document.getElementById('close_text_yososhindo').addEventListener("click",()=>{
                document.getElementById('text_yososhindo').classList.remove("display")
            });
            document.getElementById('btn_mikata_text_yososhindo').addEventListener("click",()=>{
                document.getElementById('mikata_text_yososhindo').classList.add("display");
            });
            document.getElementById('close_mikata_text_yososhindo').addEventListener("click",()=>{
                document.getElementById('mikata_text_yososhindo').classList.remove("display")
            });
            document.getElementById('display_onoff_point_check').addEventListener("change",()=>{
                if (document.getElementById('display_onoff_point_check').checked) {
                    if (shindo_layer2 != undefined && shindo_layer2 != 0) {
                        map.addLayer(shindo_layer2);
                        point_onoff = 1;
                    } else {
                        console.error('エラー： \"shindo_layer2\" が見つからないため、観測点をマップに追加できません。');
                        point_onoff = 0;
                    }
                } else {
                    if (shindo_layer2 != undefined && shindo_layer2 != 0) {
                        map.removeLayer(shindo_layer2);
                        point_onoff = 0;
                    } else {
                        console.error('エラー： \"shindo_layer2\" が見つからないため、観測点をマップから削除できません。');
                        point_onoff = 1;
                    }
                }
                if (document.getElementById('display_onoff_point_check').checked) {
                    if (shindo_layer3 != undefined && shindo_layer3 != 0) {
                        map.addLayer(shindo_layer3);
                        point_onoff = 1;
                    } else {
                        console.error('エラー： \"shindo_layer3\" が見つからないため、観測点をマップに追加できません。');
                        point_onoff = 0;
                    }
                } else {
                    if (shindo_layer3 != undefined && shindo_layer3 != 0) {
                        map.removeLayer(shindo_layer3);
                        point_onoff = 0;
                    } else {
                        console.error('エラー： \"shindo_layer3\" が見つからないため、観測点をマップから削除できません。');
                        point_onoff = 1;
                    }
                }
            });
            document.getElementById('display_onoff_fill_check').addEventListener("change",()=>{
                if (document.getElementById('display_onoff_fill_check').checked) {
                    if (shindo_layer != undefined && shindo_layer != 0) {
                        map.addLayer(shindo_layer);
                        fill_onoff = 1;
                    } else {
                        console.error('エラー： \"shindo_layer\" が見つからないため、塗りつぶしをマップに追加できません。');
                        fill_onoff = 0;
                    }
                } else {
                    if (shindo_layer != undefined && shindo_layer != 0) {
                        map.removeLayer(shindo_layer);
                        fill_onoff = 0;
                    } else {
                        console.error('エラー： \"shindo_layer\" が見つからないため、塗りつぶしをマップから削除できません。');
                        fill_onoff = 1;
                    }
                }
            });
            document.getElementById('ui_display_onoff_title_check').addEventListener("change",()=>{
                if (document.getElementById('ui_display_onoff_title_check').checked) {
                    document.getElementById('title').classList.add("display");
                } else {
                    document.getElementById('title').classList.remove("display");
                }
            });
            document.getElementById('ui_display_onoff_info1_check').addEventListener("change",()=>{
                if (document.getElementById('ui_display_onoff_info1_check').checked) {
                    document.getElementById('info1').classList.add("display");
                } else {
                    document.getElementById('info1').classList.remove("display");
                }
            });
            document.getElementById('ui_display_onoff_info2_check').addEventListener("change",()=>{
                if (document.getElementById('ui_display_onoff_info2_check').checked) {
                    document.getElementById('info2').classList.add("display");
                } else {
                    document.getElementById('info2').classList.remove("display");
                }
            });
        </script>
    </body>
</html>